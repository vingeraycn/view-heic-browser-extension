# 📋 变更日志

所有项目的重要更改都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵守 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.0.8] - 2025-01-28 🚀 重大重构版本

### ✨ 新增功能

- **多图 HEIC 支持**: 添加多图 HEIC 文件展开显示功能
  - 点击图片展开显示所有图像
  - 网格布局，最多 4 列显示
  - 流畅的展开/折叠动画
  - 智能检测多图 HEIC 文件
- **现代化测试环境**: 全新的 Node.js 测试服务器
  - 自动打开浏览器
  - 跨平台兼容性
  - 优雅的错误处理
- **Tailwind CSS 集成**: 现代化的 UI 设计
  - 响应式布局
  - 优美的组件设计
  - 更小的 CSS 体积

### 🔧 改进

- **依赖升级**: 从 `heic2any@0.0.4` 升级到 `heic-to@1.2.1`
  - 基于最新 libheif 1.20.1
  - 更好的性能和稳定性
  - 持续维护支持
- **架构重构**: 完整的 TypeScript 模块化重写
  - `utils/heic-converter.ts` - 核心转换引擎
  - `utils/live-photo-handler.ts` - 多图 HEIC 处理
  - `utils/types.ts` - 完整类型定义
  - `utils/constants.ts` - 配置常量管理
- **内存管理优化**
  - 自动清理 blob URLs
  - 避免重复处理同一图片
  - 智能资源回收
- **错误处理增强**
  - 分类错误类型 (CORS, 格式, 网络等)
  - 用户友好的错误提示
  - 点击查看原图功能
- **性能优化**
  - 限制并发处理数量 (最多 3 张)
  - 防抖动的 DOM 监听
  - 智能缓存机制

### 🧪 测试改进

- **本地化测试环境**: 5 个不同类型的 HEIC 测试文件
  - `example.heic` (1.1MB) - 大文件性能测试
  - `small-test.heic` (873KB) - Nokia 标准文件
  - `medium-test.heic` (219KB) - 小文件快速转换
  - `live-photo-test.heic` (219KB) - 多图 HEIC 展开测试
  - `corrupted-test.heic` (78B) - 错误处理测试
- **零 CORS 问题**: 完全本地化的测试方案
- **实时统计**: 转换成功/失败数量实时显示

### 🗑️ 移除

- 移除未使用的 React 依赖和相关配置
- 清理测试代码和注释残留
- 删除重复的文档文件

### 🐛 修复

- 修复内存泄漏问题
- 解决重复处理图片的问题
- 修复 Python 服务器 BrokenPipe 错误
- 改进 CORS 错误处理

### 📚 文档更新

- 全新的 README.md 设计
- 添加完整的 CHANGELOG.md
- 更新安装和开发指南
- 添加故障排除指南

---

## [1.0.7] - 2024-07-10 🔄 稳定性改进

### 🔧 改进

- 修复扩展在某些网站的兼容性问题
- 优化图片加载性能
- 改进错误日志记录

### 🐛 修复

- 修复动态加载图片的监听问题
- 解决部分网站的样式冲突

---

## [1.0.6] - 2024-06-15 🎨 UI 优化

### ✨ 新增功能

- 添加转换状态视觉指示
- 改进处理中的加载动画

### 🔧 改进

- 优化扩展图标设计
- 改进用户界面交互

---

## [1.0.5] - 2024-05-20 🚀 性能提升

### 🔧 改进

- 提升大文件处理速度
- 优化内存使用效率
- 改进并发处理机制

### 🐛 修复

- 修复某些 HEIC 文件无法识别的问题
- 解决扩展在 Firefox 上的兼容性问题

---

## [1.0.4] - 2024-04-10 🔧 基础优化

### 🔧 改进

- 改进 HEIC 文件检测算法
- 优化转换质量设置
- 提升扩展启动速度

### 🐛 修复

- 修复在某些网站上的 JavaScript 错误
- 解决图片缓存问题

---

## [1.0.3] - 2024-03-05 🛠️ 稳定性修复

### 🐛 修复

- 修复扩展在页面刷新后失效的问题
- 解决与其他扩展的冲突问题
- 修复内存泄漏问题

---

## [1.0.2] - 2024-02-01 📱 兼容性改进

### 🔧 改进

- 改进对不同 HEIC 文件格式的支持
- 优化在移动设备上的表现
- 提升转换成功率

### 🐛 修复

- 修复某些网站的 CSS 样式冲突
- 解决大文件转换超时问题

---

## [1.0.1] - 2024-01-15 🐛 初期修复

### 🐛 修复

- 修复扩展安装后首次使用的问题
- 解决在某些浏览器版本上的兼容性问题
- 修复转换失败时的错误处理

---

## [1.0.0] - 2024-01-01 🎉 首次发布

### ✨ 核心功能

- **HEIC 图片转换**: 自动将 HEIC 格式转换为 PNG
- **智能检测**: 自动识别页面中的 HEIC 图片
- **动态监听**: 支持动态加载的图片转换
- **跨域支持**: 处理各种网站的 CORS 限制

### 🏗️ 技术栈

- 基于 WXT 框架开发
- 使用 heic2any 进行格式转换
- TypeScript 支持
- Chrome/Firefox 兼容

### 📦 发布渠道

- Chrome Web Store 上架
- GitHub Releases 手动下载

---

## 🔮 未来计划

### v1.1.0 (计划中)

- [ ] 更多动态 HEIC 格式支持
- [ ] 批量转换功能
- [ ] 转换质量可调节
- [ ] 更多输出格式支持 (JPEG, WebP)

### v1.2.0 (规划中)

- [ ] 云端转换服务集成
- [ ] 离线模式支持
- [ ] 高级设置面板
- [ ] 转换历史记录

---

## 🤝 贡献者

感谢所有为这个项目做出贡献的开发者：

- [@vingeray](https://github.com/vingeray) - 项目创建者和主要维护者

---

## 📞 支持

如果你在使用过程中遇到问题或有功能建议，请：

1. 查看 [故障排除指南](README.md#故障排除)
2. 搜索 [现有问题](https://github.com/vingeraycn/view-heic-browser-extension/issues)
3. 创建 [新问题](https://github.com/vingeraycn/view-heic-browser-extension/issues/new)

---

<div align="center">

**项目链接**: [GitHub](https://github.com/vingeraycn/view-heic-browser-extension) • [Chrome Web Store](https://chromewebstore.google.com/detail/view-heic/kpbcokcekojhfifjkbglcbaiffegecge)

</div>
